---
kit:
  features:
    - local-ha-db
    - local-blobstore
    - haproxy
    - tls
    - self-signed
    - small-footprint
    - dns-service-discovery
    - container-routing-integrity
    - routing-api
    # - autoscaler

meta:
  cats:
    api:        (( concat "https://" meta.api_hostname ))
    admin_user: admin
    admin_password: (( vault meta.vault "/admin_user:password" ))
    apps_domain: (( grab params.apps_domains[0] ))
    artifacts_directory: logs
    credhub_client: credhub_admin_client
    credhub_mode: assisted
    include_apps: true
    include_backend_compatibility: true
    include_capi_no_bridge: true
    include_container_networking: true
    include_credhub: true
    include_detect: true
    include_docker: true
    include_internet_dependent: true
    include_internetless: false
    include_isolation_segments: false
    include_private_docker_registry: false
    include_route_services: true
    include_routing: true
    include_routing_isolation_segments: false
    include_security_groups: true
    include_service_discovery: false
    include_service_instance_sharing: true
    include_services: true
    include_ssh: true
    include_sso: true
    include_tasks: true
    include_tcp_routing: true
    include_v3: true
    include_volume_services: false
    include_zipkin: true
    skip_ssl_validation: true
    stacks:
    - cflinuxfs3
    timeout_scale: 1
    use_http: true
    use_log_cache: false

params:
  env:   ci-baseline
  bosh:  snw-genesis-ci

  autoscaler_network: default
  cf_db_network: default
  cf_edge_network: default
  cf_internal_network: default
  cf_runtime_network: default

  haproxy_vm_type:     default
  postgres_vm_type:    default
  blobstore_vm_type:   default
  api_vm_type:         default
  bbs_vm_type:         default
  cell_vm_type:        default
  diego_vm_type:       default
  doppler_vm_type:     default
  errand_vm_type:      default
  loggregator_vm_type: default
  nats_vm_type:        default
  router_vm_type:      default
  syslogger_vm_type:   default
  uaa_vm_type:         default

  autoscaler_api_vm_type:       default
  autoscaler_broker_vm_type:    default
  autoscaler_scheduler_vm_type: default
  autoscaler_collector_vm_type: default
  autoscaler_scaler_vm_type:    default
  autoscaler_engine_vm_type:    default
  autoscaler_operator_vm_type:  default

  availability_zones: [z1, z2]

  disk_type: default
  postgres_disk_pool: default
  blobstore_disk_pool: default

  base_domain: 10.135.0.27.netip.cc
  skip_ssl_validation: true

  haproxy_ips: (( empty array ))

  postgres_vip: sql-db.service.cf.internal

  set_kernel_parameters: false
  apparmor_profile: ""

instance_groups:
- name: haproxy
  networks:
  - (( replace ))
  - name: default

- name: postgres
  jobs:
  - name: vip
    properties:
      keepalived:
        enabled: false # use bosh dns instead
